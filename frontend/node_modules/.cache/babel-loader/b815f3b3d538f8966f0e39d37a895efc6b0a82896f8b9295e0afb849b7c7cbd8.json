{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const P5History=()=>{const{id}=useParams();const[p5History,setP5History]=useState([]);const[p5Balance,setP5Balance]=useState(0);useEffect(()=>{axios.get(\"/api/rewards/\".concat(id,\"/p5\")).then(response=>setP5History(response.data)).catch(error=>console.log(error));axios.get(\"/api/users/\".concat(id)).then(response=>setP5Balance(response.data.p5Balance)).catch(error=>console.log(error));},[id]);const handleDelete=rewardId=>{axios.delete(\"/api/rewards/\".concat(rewardId)).then(()=>setP5History(p5History.filter(reward=>reward._id!==rewardId))).catch(error=>console.log(error));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"P5 History\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"P5 Balance: \",p5Balance]}),/*#__PURE__*/_jsx(Link,{to:\"/\".concat(id,\"/rewards/new\"),children:\"Create New Reward\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date-Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"P5 Given\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:p5History.map((reward,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:new Date(reward.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:reward.points}),/*#__PURE__*/_jsx(\"td\",{children:reward.givenTo.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(reward._id),children:\"Delete\"})})]},reward._id))})]})]});};export default P5History;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","axios","jsx","_jsx","jsxs","_jsxs","P5History","id","p5History","setP5History","p5Balance","setP5Balance","get","concat","then","response","data","catch","error","console","log","handleDelete","rewardId","delete","filter","reward","_id","children","to","map","index","Date","timestamp","toLocaleString","points","givenTo","name","onClick"],"sources":["/home/nikki/mini-peerfives/frontend/src/components/P5History.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport axios from 'axios';\n\nconst P5History = () => {\n  const { id } = useParams();\n  const [p5History, setP5History] = useState([]);\n  const [p5Balance, setP5Balance] = useState(0);\n\n  useEffect(() => {\n    axios.get(`/api/rewards/${id}/p5`)\n      .then(response => setP5History(response.data))\n      .catch(error => console.log(error));\n    axios.get(`/api/users/${id}`)\n      .then(response => setP5Balance(response.data.p5Balance))\n      .catch(error => console.log(error));\n  }, [id]);\n\n  const handleDelete = (rewardId) => {\n    axios.delete(`/api/rewards/${rewardId}`)\n      .then(() => setP5History(p5History.filter(reward => reward._id !== rewardId)))\n      .catch(error => console.log(error));\n  };\n\n  return (\n    <div>\n      <h1>P5 History</h1>\n      <p>P5 Balance: {p5Balance}</p>\n      <Link to={`/${id}/rewards/new`}>Create New Reward</Link>\n      <table>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Date-Time</th>\n            <th>P5 Given</th>\n            <th>User Name</th>\n            <th>Delete</th>\n          </tr>\n        </thead>\n        <tbody>\n          {p5History.map((reward, index) => (\n            <tr key={reward._id}>\n              <td>{index + 1}</td>\n              <td>{new Date(reward.timestamp).toLocaleString()}</td>\n              <td>{reward.points}</td>\n              <td>{reward.givenTo.name}</td>\n              <td><button onClick={() => handleDelete(reward._id)}>Delete</button></td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default P5History;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}