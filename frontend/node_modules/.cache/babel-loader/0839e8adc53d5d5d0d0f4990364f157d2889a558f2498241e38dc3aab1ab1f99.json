{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useHistory}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewReward=()=>{const{id}=useParams();const history=useHistory();const[points,setPoints]=useState(0);const[users,setUsers]=useState([]);const[selectedUser,setSelectedUser]=useState('');const[p5Balance,setP5Balance]=useState(0);useEffect(()=>{axios.get('/api/users').then(response=>setUsers(response.data.filter(user=>user._id!==id))).catch(error=>console.log(error));axios.get(\"/api/users/\".concat(id)).then(response=>setP5Balance(response.data.p5Balance)).catch(error=>console.log(error));},[id]);const handleSubmit=event=>{event.preventDefault();if(points>100||points>p5Balance)return;axios.post('/api/rewards',{points,givenBy:id,givenTo:selectedUser}).then(()=>history.push(\"/\".concat(id,\"/p5\"))).catch(error=>console.log(error));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"New Reward\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Points\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:points,onChange:e=>setPoints(Number(e.target.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"User\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedUser,onChange:e=>setSelectedUser(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select User\"}),users.map(user=>/*#__PURE__*/_jsx(\"option\",{value:user._id,children:user.name},user._id))]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:points>100||points>p5Balance,children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>history.push(\"/\".concat(id,\"/p5\")),children:\"Cancel\"})]})]});};export default NewReward;","map":{"version":3,"names":["React","useState","useEffect","useParams","useHistory","axios","jsx","_jsx","jsxs","_jsxs","NewReward","id","history","points","setPoints","users","setUsers","selectedUser","setSelectedUser","p5Balance","setP5Balance","get","then","response","data","filter","user","_id","catch","error","console","log","concat","handleSubmit","event","preventDefault","post","givenBy","givenTo","push","children","onSubmit","type","value","onChange","e","Number","target","map","name","disabled","onClick"],"sources":["/home/nikki/mini-peerfives/frontend/src/components/NewReward.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport axios from 'axios';\n\nconst NewReward = () => {\n  const { id } = useParams();\n  const history = useHistory();\n  const [points, setPoints] = useState(0);\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState('');\n  const [p5Balance, setP5Balance] = useState(0);\n\n  useEffect(() => {\n    axios.get('/api/users')\n      .then(response => setUsers(response.data.filter(user => user._id !== id)))\n      .catch(error => console.log(error));\n    axios.get(`/api/users/${id}`)\n      .then(response => setP5Balance(response.data.p5Balance))\n      .catch(error => console.log(error));\n  }, [id]);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (points > 100 || points > p5Balance) return;\n    axios.post('/api/rewards', { points, givenBy: id, givenTo: selectedUser })\n      .then(() => history.push(`/${id}/p5`))\n      .catch(error => console.log(error));\n  };\n\n  return (\n    <div>\n      <h1>New Reward</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>Points</label>\n          <input\n            type=\"number\"\n            value={points}\n            onChange={e => setPoints(Number(e.target.value))}\n          />\n        </div>\n        <div>\n          <label>User</label>\n          <select value={selectedUser} onChange={e => setSelectedUser(e.target.value)}>\n            <option value=\"\">Select User</option>\n            {users.map(user => (\n              <option key={user._id} value={user._id}>{user.name}</option>\n            ))}\n          </select>\n        </div>\n        <button type=\"submit\" disabled={points > 100 || points > p5Balance}>Submit</button>\n        <button type=\"button\" onClick={() => history.push(`/${id}/p5`)}>Cancel</button>\n      </form>\n    </div>\n  );\n};\n\nexport default NewReward;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}